(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{567:function(e,t,a){"use strict";a.r(t);var n=a(29),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("Recently, we were notified of a re-entrancy vulnerability in the exception\nhandling designs of some popular SGX SDKs (including Intel SGX SDK), resulting in\narbitrary disclosure of enclave private memory and code-reuse attacks in SGX\nenclave.")]),e._v(" "),a("p",[e._v("The vulnerability is named as "),a("a",{attrs:{href:"https://jasonyu1996.github.io/SmashEx/",target:"_blank",rel:"noopener noreferrer"}},[e._v("SmashEx")]),e._v("\n[1]. The SmashEx attack affects several SGX runtimes with exception handling.\nFor Intel SGX SDK, the assigned identifier is\n"),a("a",{attrs:{href:"https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00548.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("CVE-2021-0186")]),e._v(" [2].\nWhile the vulnerability itself is not a Teaclave flaw, we're taking proactive\nmeasures to explain and mitigate its impact on Teaclave users.")]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v("Due to the lack of atomicity primitives in SGX enclaves, an SGX enclave can be\ninterrupted and re-entered at any time, including when it is in a state unsafe\nfor re-entry (i.e., when it is executing a critical section). The SmashEx attack\nexploits such unsafe enclave re-entries happening in the exception handling\nmechanism in the SGX runtime.")]),e._v(" "),a("p",[e._v("A malicious host can create an exception immediately after EENTER which causes\ncontrol to be transferred to the host before the enclave stack (RSP register)\nhas been properly set up. Then, a special ECALL (called "),a("code",[e._v("ECMD_EXCEPT")]),e._v(") to\nenclave will use the attacker-controlled RSP register to setup the context of\nthe exception handler function. At last, when the host transfers control back to the\nenclave with ERESUME, it may execute with a stack that resides in host memory\nthereby enabling ROP exploits.")]),e._v(" "),a("p",[e._v("This vulnerability can be fixed by adding extra checks on untrusted RSP when\nconstructing the context of the exception handler.")]),e._v(" "),a("h2",{attrs:{id:"affected-versions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#affected-versions"}},[e._v("#")]),e._v(" Affected Versions")]),e._v(" "),a("p",[e._v("For Intel SGX SDK, the vulnerability affects all projects using the following\nversions.")]),e._v(" "),a("ul",[a("li",[e._v("Intel SGX SDK for Windows v2.12 and erlier")]),e._v(" "),a("li",[e._v("Intel SGX SDK for Linux v2.13 and earlier")])]),e._v(" "),a("h2",{attrs:{id:"impacts-on-teaclave"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#impacts-on-teaclave"}},[e._v("#")]),e._v(" Impacts on Teaclave")]),e._v(" "),a("p",[e._v("Teaclave SGX SDK wraps Intel SGX SDK and provides a Rust development\nenvironment. The affected Intel SGX SDK version was recommended in Rust SGX SDK\nv1.1.3 (which is a pre-Apache release). Therefore, people using Rust SGX SDK\nv1.1.3 with the vulnerable Intel SGX SDK (v2.13 and earlier) are also\nvulnerable. "),a("em",[e._v("However, the current Teaclave SGX SDK is compatible with newer Intel SGX\nSDK versions. Therefore, we recommend all users to upgrade to the latest Intel\nSGX SDK.")])]),e._v(" "),a("p",[e._v("For Teaclave (i.e., the Teaclave FaaS platform), it uses Teaclave SGX SDK to\nbuild a confidential computing platform. Therefore, the Teaclave v0.2.0 released\nin March used the vulnerable Intel SGX SDK version.\n"),a("em",[e._v("However, the "),a("a",{attrs:{href:"https://github.com/apache/incubator-teaclave/releases/tag/v0.3.0",target:"_blank",rel:"noopener noreferrer"}},[e._v("v0.3.0 released")]),e._v(" [3]\nin August has upgraded the Intel SGX SDK to v2.14 with the fix. Therefore,\nthe latest release of Teaclave is not affected by this vulnerability.")])]),e._v(" "),a("h2",{attrs:{id:"patches-mitigations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#patches-mitigations"}},[e._v("#")]),e._v(" Patches & Mitigations")]),e._v(" "),a("p",[e._v("The vulnerability has been fixed in Intel SGX SDK in this patch:")]),e._v(" "),a("ul",[a("li",[e._v("Patch: "),a("a",{attrs:{href:"https://github.com/intel/linux-sgx/commit/edfe42a517b3e4b1d81204c3cdef6da6cb35fefc",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/intel/linux-sgx/commit/edfe42a517b3e4b1d81204c3cdef6da6cb35fefc")])])]),e._v(" "),a("p",[e._v("Teaclave users can apply the following mitigations:")]),e._v(" "),a("ul",[a("li",[e._v("Use Teacalve SGX SDK with Intel SGX SDK for Linux version 2.14 or later")]),e._v(" "),a("li",[e._v("Upgrade to Teaclave 0.3.0 or later")])]),e._v(" "),a("h2",{attrs:{id:"acknowledgements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acknowledgements"}},[e._v("#")]),e._v(" Acknowledgements")]),e._v(" "),a("p",[e._v("We would like to thank Jinhua Cui, National University of Defense Technology and\nNational University of Singapore, Shweta Shinde, ETH Zurich , Zhijingcheng Yu,\nNational University of Singapore, and Prateek Saxena, National University of\nSingapore for notifying us about this issue.")]),e._v(" "),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[e._v("#")]),e._v(" References")]),e._v(" "),a("ul",[a("li",[e._v("[1] "),a("a",{attrs:{href:"https://jasonyu1996.github.io/SmashEx/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://jasonyu1996.github.io/SmashEx/")])]),e._v(" "),a("li",[e._v("[2] "),a("a",{attrs:{href:"https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00548.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00548.html")])]),e._v(" "),a("li",[e._v("[3] "),a("a",{attrs:{href:"https://github.com/apache/incubator-teaclave/releases/tag/v0.3.0",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/apache/incubator-teaclave/releases/tag/v0.3.0")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://arxiv.org/abs/2110.06657",target:"_blank",rel:"noopener noreferrer"}},[e._v("SmashEx: Smashing SGX Enclaves Using Exceptions")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/openenclave/openenclave/security/advisories/GHSA-mj87-466f-jq42",target:"_blank",rel:"noopener noreferrer"}},[e._v("Open Enclave SDK Elevation of Privilege Vulnerability")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);